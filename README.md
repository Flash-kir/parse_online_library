# Парсим онлайн библиотеку

Программа скачивает книги с сайта https://tululu.org/ и складывает в папку "/books".
Также скачиваются обложки книг в папку "/images".

## Установка

Клонируйте репозиторий:

    git@github.com:Flash-kir/parse_online_library.git

Для установки компонентов выполните:

    pip install -r requirenments.txt

Для запуска вызовите:

    python main.py [start_id] [end_id]

start_id это номер книги, с которой начнется скачивание
end_id это номер книги, на которой закончится скачивание

## get_book_html

Функция получает в качестве аргумента:
book_id - id книги на сайте https://tululu.org/
Возвращает текст html страницы книги.

## parse_book_page

Функция получает в качестве аргументов: 
book_id - id книги на сайте https://tululu.org/ 
book_html - текст html страницы rybub
Парсит название книги, автора, жанр и комментари.
Возвращает словарь c ключами:
'filepath' - тип строка, содержит название книги и имя автора
'image_path' - url адрес обложки книги
'comments' - список текстов комментариев книги
'genres' - список жанров, к которым относится книга

## check_for_redirect

Функция получает response и вызывает исключение в случае отсутствия книги.

## download_book_text_to_file

Функция получает на вход аргументы:

book_id - id книги на сайте https://tululu.org/
filename - имя файла, в который будет сохранен текст книги
folder - каталог, в который необходимо сохранить текст книги (по умолчанию "/books")

Проверяет есть ли книга по url адресу и в случае успеха сохраняет ее в файл.

## download_image

Функция получает на вход аргументы:

url - url адрес обложки книги
folder - каталог, в который необходимо сохранить изображение обложки книги (по умолчанию "/images")

Проверяет есть ли изображение по url адресу и в случае успеха сохраняет его в файл.